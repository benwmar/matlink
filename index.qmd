---
title: "CDC / Johns Hopkins technical guide to getting started with  MATLINK"
date-modified: last-modified
bibliography: references.bib
---

# Welcome
## INTRO VIDEO, KHYZER AND PAUL:  NEED A PLACE TO STORE THE VIDEO -- TOO LARGE FOR GITHUB

## DIAGRAM OF MATLINK program?

## Miele K, Kim SY, Jones R, et al. Medication for Opioid Use Disorder During Pregnancy — Maternal and Infant Network to Understand Outcomes Associated with Use of Medication for Opioid Use Disorder During Pregnancy (MAT-LINK), 2014–2021. MMWR Surveill Summ 2023;72(No. SS-3):1–14. [DOI: http://dx.doi.org/10.15585/mmwr.ss7203a1](http://dx.doi.org/10.15585/mmwr.ss7203a1). [https://www.cdc.gov/mmwr/volumes/72/ss/ss7203a1.htm](https://www.cdc.gov/mmwr/volumes/72/ss/ss7203a1.htm)

## CONTACT INFORMATION:  roles and what they do
## Meeting schedule

# REdCAP Training Resouces

## MATLINK-specific REDCap resources - TBD



## This is the main REDCap training page: [REDCap Resources](https://projectredcap.org/resources/)
From University of Colorado, below are excellent REDCap resources: [University of Colorado REDCap Resources](https://cctsi.cuanschutz.edu/resources/informatics/redcap-resources)

## Best Practices

### Best Practices
- [Background Information](https://redcap.ucdenver.edu/surveys/?s=RJ7DP8K9DL): Learn more about the background of REDCap at UC Denver, general policies for use, and some REDCap best practices (video)
- [COMIRB Template](https://redcap.ucdenver.edu/surveys/?s=FMWPDEH7X3) (user guide)
- [Best Practices](https://redcap.ucdenver.edu/surveys/?s=4JHTMJ3Y4P) (user guide)
- [18 HIPAA Identifiers & PHI (University of Maryland)](https://redcap.ucdenver.edu/surveys/?s=F9YD7CE8RW) (user guide)

## Project Setup

### Project Setup
- [Login and Project Creation](https://redcap.ucdenver.edu/surveys/?s=LYLJ7X3CYD): Learn how to log in to your REDCap account and create a new project (video)
- [Project Setup Page](https://redcap.ucdenver.edu/surveys/?s=L4KD8LCP8W): Explore the project home, project setup, other functionality, and project revision pages. Learn how to customize the settings for your projects, set user rights, use data access groups, and move your project to Production (video)
- [Online Designer](https://redcap.ucdenver.edu/surveys/?s=7FM7YD8Y9E): Learn about the basic steps in designing your project. Learn how to set up forms; create a new field; validate fields; code multiple choice questions; use yes/no and true/false fields; create slider fields; and how to use file upload fields, descriptive fields, and section headers (video)
- [Online Designer - Advanced Features](https://redcap.ucdenver.edu/surveys/?s=9M3Y4F3NY7): Learn how to use advanced features in the Online Designer such as branching logic, calculated fields, matrices, piping, and the data dictionary. Review some best practices in form creation (video)
- [Longitudinal Database](https://redcap.ucdenver.edu/surveys/?s=8D3C9L7PDE): Learn about the longitudinal data collection set up and how it varies from a standard or classic data collection instrument. Learn how to define events and assign forms to specific events, use the scheduling module, and advanced calendar features available only in longitudinal studies (video)
- [Repeating Forms](https://redcap.ucdenver.edu/surveys/?s=6D3C7N4FEM): Learn how to use repeating forms and events (video)

## Advanced Form Design

### Advanced Project Design
- [Action Tags](https://redcap.ucdenver.edu/surveys/?s=3YM7C9D4DE): Learn how to use the most popular and powerful action tags (video)
- [Action Tags List](https://redcap.ucdenver.edu/surveys/?s=7D4C9M7NY3): List of all action tags with descriptions (user guide)
- [Alerts and Notifications](https://redcap.ucdenver.edu/surveys/?s=8D4N7Y3FM9): Learn about the alerts and notifications feature (video)
- [Calculations](https://redcap.ucdenver.edu/surveys/?s=6D3M7Y9F4C): Learn how to use simple calculations, if/then statements, nest calculations, and datediff calculations (video)
- [Field Embedding](https://redcap.ucdenver.edu/surveys/?s=7M9C4D8FNY): Explore how to use the field embedding feature to format data entry and survey forms (video)
- [Formatting REDCap Forms with HTML](https://redcap.ucdenver.edu/surveys/?s=6D3C8M9Y7F) (user guide)
- [Logic Guide](https://redcap.ucdenver.edu/surveys/?s=7F9M3C4D8Y): Learn how to format logic in REDCap (user guide)
- [Smart Variables](https://redcap.ucdenver.edu/surveys/?s=8D7F9M3C4Y): Learn how to use smart variables in REDCap (video)

## Data Management

### Data Management
- [Data Entry](https://redcap.ucdenver.edu/surveys/?s=7D9M3F4C8Y): Learn how to add new records, edit existing records, use advanced data entry features, and navigate between records (video)
- [Missing Data](https://redcap.ucdenver.edu/surveys/?s=3F7D9M4C8Y): Set specific missing data codes for your entire project (video)
- [Advanced Features](https://redcap.ucdenver.edu/surveys/?s=8D7M3F9C4Y): Learn how to use some advanced REDCap features, including the randomization feature, the logging feature, the field comment log, the data import tool, and the data quality tool (video)
- [Data Imports](https://redcap.ucdenver.edu/surveys/?s=9F7D3M4C8Y): A detailed look at use the import tool to import data from another source (video)
- [Randomization](https://redcap.ucdenver.edu/surveys/?s=7M9D3F4C8Y): Learn how to use the randomization feature (video)
- [Reports and Exports](https://redcap.ucdenver.edu/surveys/?s=8F9D3M4C7Y): Learn how to create a report, review basic statistics and charts, and export a report or full data set (video)
- [Public Reports](https://redcap.ucdenver.edu/surveys/?s=9D7F3M4C8Y): Learn how to make reports accessible with a public link (video)

## Surveys

### Surveys
- [Surveys](https://redcap.ucdenver.edu/surveys/?s=8F9M3D4C7Y): Learn how to enable surveys, the benefits of using surveys, setting up your survey, and the different ways you can distribute both initial and follow-up surveys (video)
- [Survey Login](https://redcap.ucdenver.edu/surveys/?s=3F8D7M4C9Y): Learn how to use the survey login feature (video)
- [Survey Queue](https://redcap.ucdenver.edu/surveys/?s=4F8D3M7C9Y): A deep dive into using the survey queue (video)
- [PDF Auto-Archiver and e-Consent](https://redcap.ucdenver.edu/surveys/?s=7F3D8M9C4Y): Use REDCap's e-Consent framework to consent participants and save PDFs of the consent (video)
- [Twilio](https://redcap.ucdenver.edu/surveys/?s=9F3D7M4C8Y): Learn how to use Twilio to send your survey invitations via text message or allow participants to take the survey via voice call (video)
- [Twilio Guide](https://redcap.ucdenver.edu/surveys/?s=8F7D9M3C4Y) (user guide)

## Optional Modules

### Optional Modules
- [Double Data Entry](https://redcap.ucdenver.edu/surveys/?s=4F7D3M9C8Y): Learn how to use REDCap's Double Data Entry module (video)
- [Mobile App Guide](https://redcap.ucdenver.edu/surveys/?s=3F8D7M4C9Y) (user guide)
- [Multi-Language Management Manual](https://redcap.ucdenver.edu/surveys/?s=8D3F7M4C9Y) (user guide)

## Updates and Additional Features

### Updates and Additional Features
We hold a REDCap user group meeting for our active users after every major upgrade twice a year to discuss the new features. You can watch the recordings of our previous group videos on Vimeo:
- [User Group Meeting 2/23/2023](https://vimeo.com/123456789): MyCap integration, automated invitations with repeating surveys, file repository improvements
- [User Group Meeting 7/19/2022](https://vimeo.com/123456789): Multi-language management updates, survey start time and survey duration, FAQ updates
- [User Group Meeting 3/9/2022](https://vimeo.com/123456789): Multi-language management, public reports, @IF form display logic
- [User Group Meeting 8/11/2021](https://vimeo.com/123456789): Project dashboards, smart variables, smart charts, and smart tables
- [User Group Meeting 3/31/2021](https://vimeo.com/123456789): @CALCDATE/@CALCTEXT and special functions
- [User Group Meeting 8/26/2020](https://vimeo.com/123456789): eConsent, field embedding

## Frequently Asked Questions

### Frequently Asked Questions
- **Can I add users to my project?**
  Anyone creating projects should attend a tutorial (see schedule on Tutorials page) which focuses on project creation and REDCap use policies. If you have attended a

 tutorial you can request limited accounts for others who will not be designing/managing projects but only doing data entry, data export, etc. To request an account email the REDCap administrator with the person's name and work email address. By doing this you are also taking responsibility for training them.
  
- **Why is the Participant ID the first field in the project?**
  When you set up a REDCap database your record identifier e.g. Participant ID must be the first field on the first form so that REDCap will link all following data on all forms for that record. There is no need to repeat the record identifier in each form.

- **How do I code categorical variables?**
  If your categorical variable has numeric response options be sure to assign a value that is the same number to avoid confusion in analysis. For example if the question is "How many times did you ...." and the options are 0,1,2,3,4,5 you should assign values of 0-5 (note: you cannot use the auto-assign feature of REDCap because it will start with 1).

- **When should I use the dropdown field type?**
  Use dropdown field types instead of radio buttons for categorical variables on your data entry forms. REDCap allows you to type the first character of a label to select that option in a dropdown which is much easier than having to individually select each radio button with your mouse.

- **How do I tell the difference between a radio and checkbox field?**
  There is a visual cue to tell you whether a field is a radio button (single option) or a checkbox (choose all that apply). Radio buttons are round, checkboxes are square.

- **How do I format branching logic or a calculation with checkbox fields?**
  Checkbox or "choose all that apply" fields are coded slightly differently from other categorical fields such as radio or dropdown. In those each option is set to equal a unique value e.g. 1=red, 2=blue, 3=green. Because any or all of the checkbox field options can be selected, each option is treated as a separate field that is either checked or unchecked (coded 1 or 0). In your exported dataset you will see that each option has become a separate variable with the number of the option as part of the variable name e.g. color(1), color(2), color(3). When using options from a checkbox field in a calculation or in branching logic instead of writing "color = 3" for example you need to write "color(3)=1" meaning that option 3 of the variable "color" has been selected.

- **How do I hide a section header field type using branching logic?**
  Section header fields follow the branching logic for *all* fields until the next section header so to hide a section header all fields until the next section header must also be hidden.

- **How do I format greater than/less than conditions in my branching logic?**
  When using a greater than/less than (><) condition in branching logic don't put quotation marks around the value as you normally would when using equal to.

- **How do I test branching logic and calculated fields in my form or survey?**
  To test branching logic or calculated fields enter a test record into your database or survey. These functions do not work on the Preview screen. You can remove all test records when you move to production.

- **How do I add an “other” option in a multiple field question that a participant can write in their answer?**
  To include an "Other" option in a multiple choice question that will allow respondents to write in an answer, add a text field that is only displayed when the Other option is selected. If you want it to appear right next to the “Other” option in the multiple choice question you’ll need to use field embedding. You’ll follow the step above, but then additionally you’ll need to tell REDCap to embed the field with the multiple choice answers—this is done by putting the variable name in { } curly brackets where you want it to appear.

- **Can I base a calculated field off another calculated field?**
  If you are using calculated fields, avoid creating second-level calculations, i.e. using the results of a calculation as part of another calculation. These fields will not reliably calculate - even though values may appear in the field onscreen, the field may be blank in your exported dataset. Keep in mind the general recommendation to do calculations as part of analysis and keep only raw data in your REDCap database.

- **Why isn’t my calculation saved?**
  If you add a calculated field after you have collected the data used in the calculation you will need to resave the form containing the calculation to trigger REDCap to perform the calculation and populate the field. To update them all at once, you can go to Data Quality under Applications on the sidebar and run Rule H. It will show all fields where the calculated values don’t match what is saved and give you the option to update them all.

- **Can I display an image in my form or survey?**
  To display an image on your data entry form or survey use the descriptive text field type which has a field upload feature. For more information please see [Formatting REDCap Forms with HTML](https://redcap.ucdenver.edu/surveys/?s=6D3C8M9Y7F).

- **Can I customize the appearance of my form or survey?**
  REDCap allows some customization of form appearance using HTML code. These include font size, font color, and spacing/indentation of field label text.

- **How do I set up the event grid in a longitudinal project?**
  When setting up a Longitudinal project event grid, if you are not using the Scheduling module, you don't need to set specific "days offset" but you still need to enter something to tell REDCap the order of your events. If you leave all zero's REDCap will put your events in alphabetical order. So you can just put 1, 2, 3, etc. You may also want to use increments of 5's in case you later need to insert a new event.

- **What happens if I accidently delete an event?**
  In a Longitudinal Model database if you accidentally delete an event your data will not be lost just hidden. When you restore the event with the assigned forms the data will also be restored.

- **Can I change the coding of my fields while in production?**
  Although you can make changes to your project fields after moving your project to Production, keep in mind that changes to coding for categorical fields will impact your existing data. For example if you have a field with Yes/No responses that are coded 10 and you change these to 21 then what was originally coded as Yes will now be No - since you have changed the meaning of the value 1.

- **How do I test my database before moving to production?**
  It's a good idea to test your database or survey before moving to Production by entering a few records of either real or fake data. When moving to Production you can choose to keep or delete these records.

- **How do I review the changes I have made before submitting?**
  Before submitting post-production changes for review, you can see whether they will cause any problems by selecting the "view a detailed summary of all drafted changes" link located next to the Submit Changes for Review button.

- **Will I lose data if submitting changes while in production?**
  Project changes made after moving to production must be reviewed prior to being implemented to reduce the risk of data corruption due to a change. However, if you make a change that cannot possibly impact existing data (e.g. create a new field), once you submit the change for approval it will be approved automatically - you won't have to wait for manual review and approval by the administrator. To view whether you changes create potential issues while you're in draft mode, go to the "view a detailed summary of all drafted changes" link.

- **What should I do if I need to make significant changes while in production?**
  If your project is in production and you need to make several changes, consider making a copy of the project (which will be in development), making the changes there, then using the data dictionary to implement the changes all at once in the production project. Alternatively, you can ask the REDCap administrator to move your project back to development.

- **How do I combine my instruments into a single survey?**
  If you have multiple instruments that you want to send out as a single survey, combine them onto a single REDCap form. You can insert page breaks between instruments using the Section Header field type.

- **How do I hide calculated fields in a survey?**
  If you are including survey responses in a calculation but don't want the respondent to see the calculations, create a separate data entry form and put the calculation fields there. The calculations will be triggered when the survey is submitted.

- **How do I schedule a survey to be sent at a specific date/time?**
  Using the "automated invitations" feature you can schedule survey to be sent at a specific date/time as well as based on a specific response to a previous form or survey. See detailed instructions on how to do this in the Help/FAQ page.

- **How can I set up surveys to go out automatically?**
  If you are using online surveys, you can schedule them to be sent automatically at certain dates or based on specified conditions being met. See Automated Invitations in the Online Designer for instructions.

- **How do I personalize an email invitation?**
  REDCap allows you to customize field labels or survey invitations using "piping". This means you can insert the response to one field e.g. first name into the label of another field or into a survey invitation text. To do this just put the variable name in square brackets where you want the customized text. For example if the

 respondent's first name is in a variable called "fname" you can add it to the label of another field like this: [fname] what is your favorite color? Similarly, when you write a survey invitation you can use: Dear [fname], please complete the attached survey. Whatever name has been entered in the field fname will appear in place of the variable name.

- **How do I track survey responses?**
  You can track who has responded to a survey by using the Participant List option. In addition, you can identify individual responses using the Participant Identifier feature. Both of these options are found in the Manage Survey Participants section of your project.

- **Can I add or delete a survey response?**
  It is possible to edit or delete survey responses. To do this, check the Edit Surveys option in the User Rights section.

- **How do I verify if a survey respondent changed their answers?**
  If you are concerned that survey respondents changed their answers before submitting their survey e.g. to try to qualify for a study you can check their responses in the Logging Tool.

- **What is the logging tool?**
  You can use the logging tool to troubleshoot issues that arise that may be due to a change in a data value, calculations and branching logic no longer working, etc. In the log you can filter by record, user, and event type.


# Data Content Ontology
![Dr. Rachel Richesson presents "Learning to Use EHR Data in Learning Health Systems"](https://img.youtube.com/vi/4uXqNLsiVuc/maxresdefault.jpg)

## Overview of Major Clinical Terminologies and Coding Systems

This document provides a detailed overview of several essential clinical terminologies and coding systems used in healthcare. Each system has a specific role and is crucial for standardized communication in healthcare settings. The information includes development history, usage, and updates of these systems.

For more in-depth information, links to the respective official websites are provided.

### SNOMED Clinical Terms (SNOMED CT)
- **Development:** Originally by the College of American Pathologists, now under SNOMED International.
- **Adoption:** Used in over 50 countries.
- **Concepts:** Over 340,000 active concepts in 19 hierarchies.
- **Usage:** Encodes clinical information including diseases, findings, and procedures.
- **Updates:** Biannual, with more frequent updates planned.
- **More Information:** [SNOMED International](https://www.snomed.org/snomed-ct)

### Logical Observation Identifiers Names and Codes (LOINC)
- **Developer:** Regenstrief Institute.
- **Function:** Identifiers for laboratory and clinical observations.
- **Content:** Over 90,000 terms.
- **Collaboration:** With SNOMED CT for coded content development.
- **Updates:** Biannual.
- **More Information:** [LOINC](https://loinc.org)

### RxNorm
- **Developer:** National Library of Medicine (NLM).
- **Function:** Standard nomenclature for medications.
- **Integration:** Links to various drug vocabularies.
- **Access:** Requires UMLS user license for proprietary content.
- **More Information:** [RxNorm - NLM](https://www.nlm.nih.gov/research/umls/rxnorm)

### International Classification of Disease (ICD)
- **Endorsement:** World Health Organization (WHO).
- **Versions:** ICD-10 widely used with national extensions; ICD-11 adopted for future use.
- **Purpose:** Epidemiology, health management, clinical purposes.
- **Updates:** Annual, freely available.
- **More Information:** [WHO ICD](https://www.who.int/classifications/icd)

### Current Procedural Terminology (CPT)
- **Developer:** American Medical Association (AMA).
- **Use:** Encoding of medical services and procedures in the USA.
- **Categories:** Three categories of codes.
- **Requirement:** License from AMA for use.
- **More Information:** [CPT - AMA](https://www.ama-assn.org/practice-management/cpt)

### Human Phenotype Ontology (HPO)
- **Function:** Bioinformatic resources for human diseases and phenotypes analysis.
- **Components:** Phenotype vocabulary, disease-phenotype annotations, algorithms.
- **Applications:** Genomic interpretation, gene-disease discovery, precision medicine.
- **Content:** Over 13,000 terms in 5 hierarchies.
- **Availability:** Freely available, multiple releases per year.
- **More Information:** [Human Phenotype Ontology](https://hpo.jax.org)

### Unified Medical Language System (UMLS)
- **Initiation:** By the US National Library of Medicine in 1986.
- **Goal:** To aid in the retrieval and integration of electronic biomedical information.
- **Challenge Addressed:** Different vocabularies expressing the same information differently.
- **Availability:** Free, but requires a license due to additional licensing requirements of some contents.
- **More Information:** [UMLS - NLM](https://www.nlm.nih.gov/research/umls)

### Ontology Mapping in BioPortal Applications
- **Process:** Finding the closest match of a code from one ontology in another.
- **Matching:** Exact equivalence is rare; approximate matching is common.
- **Challenges:** Labor-intensive and requires understanding the maps' nature and limitations.
- **Alternative Approach:** Mapping multiple ontologies to a central core terminology, as used by the OHDSI consortium.
- **More Information:** [BioPortal](https://bioportal.bioontology.org)

    <div style="text-align: right"><a href="#table-of-contents">Back to Table of Contents</a></div>

https://www.healthit.gov/isa/section-i-vocabularycode-setterminology-standards-and-implementation-specifications

## OMOP Domains by Source to Standard Vocabulary
```mermaid
graph LR
    ICD9("ICD9") -->|Transformation to OMOP CDM| SNOMED("STANDARD<br>Vocabulary Concept Code<br>SNOMED")
    ICD10("ICD10") -->|Transformation to OMOP CDM| SNOMED
```
<div style="text-align: right"><a href="#table-of-contents">Back to Table of Contents</a></div>


| Domain                    | Source Vocabulary              | Standard Vocabulary       |
|---------------------------|--------------------------------|---------------------------|
| Conditions                | ICD9, ICD10                    | SNOMED                    |
| Measurements              | LOINC or institutional specific codes | LOINC               |
| Drugs                     | NDC                            | RxNORM                    |
| Procedures                | ICD9, ICD10, CPT               | SNOMED                    |   |

* ICD = International Classification of Diseases
* SNOMED = Systematized Nomenclature of Medicine
* LOINC = Logical Observation Identifiers Names and Codes
* NDC = National Drug Code
* CPT = Current Procedural Terminology

  <div style="text-align: right"><a href="#table-of-contents">Back to Table of Contents</a></div>


## Welcome to OMOP for MATLINK users

This site is designed to provide guidance, scripts and resources for sites transitioning data to OMOP common data model as part of MATLINK.

MATLINK is a public health surveillance system designed and developed by the Centers for Disease Control and Prevention (CDC) to monitor maternal, infant, and child health outcomes associated with medication for opioid use disorder during pregnancy.

## Introduction

The goals of OMOP are to gain better understanding of human health by improving our ability to analyze observational health data.

Health data is stored by individual health systems in unique ways which limits the ability to collaborate and learn from larger populations. This is a problem because certain clinical conditions are infrequent and it is important to have sufficient number of cases to perform statistical tests. De-identified data shared across institutions has the promise of allowing scientists to develop important insights about health which is the motivation to enable greater collaboration.

#### What is a common data model?

A common data model (CDM) allows multiple health care systems with their individual databases to join forces creating greater populations which can power more compelling scientific studies. A simple way to think about this is the difficulty of finding the silverware drawer in a new kitchen -- if there is a unifying rule for where the silverware drawer is located in every kitchen (immediately to right of the sink) it makes it possible to find this much easier. A common data model creates a system so that data elements like "systolic blood pressure" or "sepsis" are recorded and organized in the same way. OMOP stands for Observational Medical Outcomes Partnership and is the common data model of the [Observational Health Data Sciences and Informatics](https://www.ohdsi.org/) program.

#### What is an ETL?

ETL stands for Extract, Transform, and Load. Essentially this is the process of mapping data from one system to another. Please see \[The Book of OHDSI, Chapter 6\] (https://ohdsi.github.io/TheBookOfOhdsi/ExtractTransformLoad.html).

## Getting started

The code for the MATLINK project is hosted on [GitHub](https://github.com/). GitHub is a web-based platform that allows developers to host, review, and collaborate on code repositories. It is widely used for version control and source code management, and it provides features such as issue tracking, wikis, and project management tools to facilitate team collaboration. 

The repository containing the code and concept sets can be accessed at [OHDSI/PHReGWG](https://github.com/OHDSI/PHReGWG)

## MATLINK technical support checklist

1.  Core site team identified and technical kickoff call scheduled
2.  Members of core team complete the following free EHDEN academy courses:
    -   [Course: OMOP CDM and Standardised Vocabularies (ehden.eu)](https://academy.ehden.eu/course/view.php?id=4)
    -   [Course: Extract, Transform and Load (ehden.eu)](https://academy.ehden.eu/course/view.php?id=7)
3.  Site confirms that they are using most recent GitHub scripts before proceeding
4.  Data Quality Dashboard Run
5.  DQD and concept counts approved or issues identified and reviewed with technical team
6.  DQD and concept counts re-run and approved by JHU technical team
7.  Run MATLINK scripts (see OMOP Cohort Creation and De-identification Guide)
8.  De-identified data exported to CSV file
9.  JHU/CDC technical team reviews CSV files before transfer
10. Any caveats in the data documented in Data Export Cover Sheet
11. Data transfer arrangements made

## OMOP Extract, Transform, and Load Guide

### [OHDSI ETL Resources]{.underline}

-   [OHDSI Wiki: ETL Creation Best Practices](https://www.ohdsi.org/web/wiki/doku.php?id=documentation:etl_best_practices)
-   [Book of OHDSI (Ch. 6): Extract Transform Load](Book%20of%20OHDSI%20-%20Ch.6%20Extract%20Transform%20Load)
-   [EHDEN Academy: OMOP CDM and Standardised Vocabularies](https://academy.ehden.eu/enrol/index.php?id=4)
-   [EHDEN Academy: Extract, Transform and Load](https://academy.ehden.eu/course/view.php?id=7)
-   [EHDEN Academy: Introduction to Usagi & Code Mappings for an ETL](https://academy.ehden.eu/enrol/index.php?id=18)

### [OHDSI ETL Steps]{.underline}

1.  **Find your people.**

    a.  Assemble ETL team: both data experts, medical experts, CDM/vocabulary experts
    b.  Assign persons with medical knowledge to create code mappings
    c.  Assign persons with technical knowledge to implement the ETL
    d.  Schedule regular meetings for quality control maintenance

2.  **Understand your data.**

    a.  Take inventory of source data (tools: [White Rabbit](https://github.com/OHDSI/WhiteRabbit))
        i.  List of tables in database
        ii. List fields in each table
        iii. List distinct values of each field
        iv. Summarize the frequency of each value of each field.
    b.  Define relationships between source data tables and fields (tools: [Rabbit-in-a-Hat](https://github.com/OHDSI/WhiteRabbit))
        i.  Record both relationship definition decisions and reasoning behind these decisions
    c.  Determine standardized vocabularies that already exist in your source data (ICD-10, CPT, HCPCS, LOINC, etc.)
        i.  Many commonly used standardized coding systems have already been mapped to the OMOP vocabulary -- utilize the work done by others across the OHDSI community to accelerate the process of mapping your data systems to OMOP.
    d.  Determine the coding systems in your source data that are proprietary or not already mapped to OMOP (proprietary patient/visit identifiers, account numbers, charge codes, etc.)

3.  **Map your codes to OMOP concepts.**

    a.  Summarize the frequency of each code from your source data code sets that will require mapping to OMOP concepts.
    b.  Create your source data to OMOP mapping. (tools: [Usagi](https://github.com/OHDSI/Usagi))
        i.  Assign this task to the ETL team members with appropriate medical knowledge to discern which codes are most synonymous based on their descriptions. Medical knowledge is key for this step as semantic understanding of clinical descriptions is required to make decisions on mapping source data concepts to OMOP concepts.
        ii. Start with the most frequently used codes and determine your threshold of code frequency to include in the mapping.
        iii. Focus on a particular project or clinical domain to limit the scope of data needed for capture and conversion to OMOP.
        iv. Utilize the Usagi tool for mapping suggestions and searching based on similarity of code descriptions.

4.  **OMOPify your data!**

    a.  Determine the technology and software used or approved at your site for data storage, querying, and transfer. Determine the tools and technologies that team members and internal staff have expertise in.
    b.  Generate the OMOP DDLs
        i.  Using R: https://github.com/OHDSI/CommonDataModel
        ii. Using SQL: https://github.com/OHDSI/CommonDataModel/tree/v5.4.0/inst/ddl/5.4
    c.  Implement the ETL.
        i.  Assign this task to the ETL team members with technical knowledge and permission for accessing and extracting source data and writing to a database.
        ii. Many tools and technologies can be used for this step. Utilize the existing tools, technologies, and expertise of your ETL team and internal staff.

5.  **Evaluate your data.**

    a.  Involve everyone in the evaluation and maintenance of ETL and data quality.
    b.  Review the ETL design documentation, computer code used in implementation, and concept mappings
    c.  Perform a manual audit using a sample of patients from both source data and derived OMOP data
    d.  Compare summary level counts of key fields between source data and OMOP derived data. (tools: Achilles)

**★ Ask for help along the way!**

The MATLINK support team is here to help you. We also encourage you to connect with the OHDSI community to find others with experience, expertise, and guidance for each step of your ETL to OMOP journey. The open, collaborative community of OHDSI is the most powerful tool at your disposal. Use it (us)!

### [Places to Connect]{.underline}

-   OHDSI.org: https://www.ohdsi.org/

-   OHDSI Wiki: https://www.ohdsi.org/web/wiki/doku.php

-   OHDSI Forums: https://forums.ohdsi.org/

-   OHDSI Workgroups: https://www.ohdsi.org/workgroups/

## OMOP Cohort Creation and De-identification Guide

```{r, echo=FALSE}
message("Updated: 7/26/2023")
```

## OMOP Table and Field Basics

Adapted from OHDSI CDM Site: [Data Model Conventions](https://ohdsi.github.io/CommonDataModel/dataModelConventions.html) 

#### Tables

For the tables of the main domains of the CDM it is imperative that concepts used are strictly limited to the domain. For example, the CONDITION_OCCURRENCE table contains only information about conditions (diagnoses, signs, symptoms), but no information about procedures. Not all source coding schemes adhere to such rules. For example, ICD-9-CM codes, which contain mostly diagnoses of human disease, also contain information about the status of patients having received a procedure. The ICD-9-CM code V20.3 'Newborn health supervision' defines a continuous procedure and is therefore stored in the PROCEDURE_OCCURRENCE table.

#### Fields

Variable names across all tables follow one convention:

|                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|---------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Notation**        | **Description**                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| \_SOURCE_VALUE      | Verbatim information from the source data, typically used in ETL to map to CONCEPT_ID, and not to be used by any standard analytics. For example, CONDITION_SOURCE_VALUE = '787.02' was the ICD-9 code captured as a diagnosis from the administrative claim.                                                                                                                                                                                     |
| \_ID                | Unique identifiers for key entities, which can serve as foreign keys to establish relationships across entities. For example, PERSON_ID uniquely identifies each individual. VISIT_OCCURRENCE_ID uniquely identifies a PERSON encounter at a point of care.                                                                                                                                                                                       |
| \_CONCEPT_ID        | Foreign key into the Standardized Vocabularies (i.e. the standard_concept attribute for the corresponding term is true), which serves as the primary basis for all standardized analytics. For example, CONDITION_CONCEPT_ID = [31967](http://athena.ohdsi.org/search-terms/terms/31967) contains the reference value for the SNOMED concept of 'Nausea'                                                                                          |
| \_SOURCE_CONCEPT_ID | Foreign key into the Standardized Vocabularies representing the concept and terminology used in the source data, when applicable. For example, CONDITION_SOURCE_CONCEPT_ID = [45431665](http://athena.ohdsi.org/search-terms/terms/45431665) denotes the concept of 'Nausea' in the Read terminology; the analogous CONDITION_CONCEPT_ID might be 31967, since SNOMED-CT is the Standardized Vocabulary for most clinical diagnoses and findings. |
| \_TYPE_CONCEPT_ID   | Delineates the origin of the source information, standardized within the Standardized Vocabularies. For example, DRUG_TYPE_CONCEPT_ID can allow analysts to discriminate between 'Pharmacy dispensing' and 'Prescription written                                                                                                                                                                                                                  |

For more information, see:

[Data Model Conventions](https://ohdsi.github.io/CommonDataModel/dataModelConventions.html#Data_Model_Conventions)

[How to Calculate Drug Dose](https://ohdsi.github.io/CommonDataModel/drug_dose.html) 

[Clinical Data Tables](https://ohdsi.github.io/CommonDataModel/cdm53.html#Clinical_Data_Tables) 

# MATLINK Concept Mapping Support

![](images/CureID_Concept_Mapping_Process.png)

#### Collaborative OMOP Concept Mapping Process

1.  CureID clinical informaticists work with each site to manually map internal concepts to OMOP concepts outlined for capture in the project plan.

2.  The combined concepts from all sites are maintained as a single, updated concept set using the OHDSI ATLAS open-source tool.

3.  All concepts currently identified by the work between CureID staff and each site, and all corresponding descendant concepts are exported from ATLAS as .json or .csv files for use in cohort creation, profiling, and clinical registry submission.

# Identifying Oxygen Devices in Epic/Clarity

[Identifying Oxygen Devices Flowsheet Measures to Map to OMOP Concepts](https://userweb.epic.com/Thread/118440/Identifying-Oxygen-Devices-Flowsheet-Measures-to-Map-to-OMOP/)

# Geocoding and Integrating SDOH Data

To link geocoded addresses to the Neighborhood Atlas for getting the Area Deprivation Index (ADI) for patients in a dataset, you will typically follow these steps:

1.  Prepare Your Dataset Patient Data: Ensure you have a dataset of patients with addresses. This data should be anonymized to protect patient privacy. Geocoding: Each address needs to be geocoded. Geocoding is the process of converting addresses into geographic coordinates (latitude and longitude).
2.  Geocoding Addresses Use a Geocoding Service: Tools like Google Maps API, ArcGIS, or OpenStreetMap can be used to geocode addresses. This will give you the precise geographic location for each address. Accuracy Check: Ensure the geocoding is accurate. Incorrect geocoding can lead to wrong ADI assignments.
3.  Understanding the Neighborhood Atlas ADI Overview: The ADI is a measure developed by the Neighborhood Atlas. It provides a ranked and searchable list of neighborhoods according to their level of disadvantage. Data Format: Understand the format of the Neighborhood Atlas data. It typically includes geographical identifiers like census tracts.
4.  Linking Geocoded Data to the Neighborhood Atlas Match Coordinates with Census Tracts: Use the geographic coordinates to determine the corresponding census tract for each patient. This can be done using GIS software like ArcGIS or QGIS. Cross-Reference with ADI Data: Once you have the census tract for each patient, cross-reference these with the Neighborhood Atlas to find the ADI for each tract.
5.  Integrating ADI into Your Dataset Add ADI to Patient Records: For each patient, add the ADI corresponding to their census tract. This step integrates socioeconomic context into your patient data.

### Geocoding

The primary consideration for linking geospatial data like social determinants of health and environmental risk factors with patient data is protecting PHI when geocoding patient home address and location data. Do not use web-based API services for geocoding as they require patient addresses to be sent to an external server for batch geocoding. Geocoding will require software that can match patient addresses to the appropriate shapefiles to determine a precise location and output latitudinal/longitudinal coordinates. Two software solutions for geocoding include: - Use ESRI ArcGIS or a similar program that can perform geocoding locally and has all appropriate shapefiles downloaded. This software is expensive, but many institutions have a license already in place. - Install geocoding software (ex: open-source, Degauss geocoder: https://www.degauss.org/geocoder) locally via manual installation or by installing a docker container.

### Area Deprivation Index

The Area Deprivation Index (ADI) is based on a measure created by the Health Resources & Services Administration (HRSA) over three decades ago, and has since been refined, adapted, and validated to the Census block group neighborhood level by Amy Kind, MD, PhD and her research team at the University of Wisconsin-Madison. It allows for rankings of neighborhoods by socioeconomic disadvantage in a region of interest (e.g., at the state or national level). It includes factors for the theoretical domains of income, education, employment, and housing quality. It can be used to inform health delivery and policy, especially for the most disadvantaged neighborhood groups. "Neighborhood" is defined as a Census block group.\
from: https://www.neighborhoodatlas.medicine.wisc.edu/

### ADI as an OHDSI Concept

ADI is not included as an explicit concept in any of the appropriate standard vocabularies. The OHDSI Vocabularies Team recommended that this information be included in the OMOP data as a custom concept in the Observation table. The workflow will be simply to add a line item to the concept mapping table for Area Deprivation Index like the following example: concept_id = 2000000999 concept_code = NA concept_name = Area deprivation index domain = observation vocabulary = Custom is_standard = C include_descendents = False

# OHDSI Tool Suite

The Edge Tool Suite are a set of OHDSI tools that should be deployed by the site that provide value around the OMOP CDM. This work was funded by the MATLINK initiative <https://cure.ncats.io>

The OHDSI open source software configured for deployment include:

-   The Atlas data science platform

-   The WebAPI backed for Atlas

-   The HADES statistical analysis packages

-   The Data Quality Dashboard

-   The Perseus ETL management system



#### Ways to deploy the software

1.  Cloud vendor software configured for use.

[OHDSI on Azure (Includes Perseus, Atlas, and Hades)](https://github.com/microsoft/OHDSIonAzure)

[OHDSI on AWS (Includes Atlas and Hades)](https://github.com/OHDSI/OHDSIonAWS)

2.  Broadsea provides a set of docker containers that ease the cost of implementation

[Broadsea (Includes Atlas and Hades)](https://github.com/OHDSI/Broadsea)

3.  Sites can compile the tools from the source repositories

#### OHDSI Specific

<https://github.com/OHDSI/CommonDataModel>

<https://github.com/OHDSI/Broadsea>

<https://github.com/OHDSI/Athena>

#### The ETL Process

<https://github.com/OHDSI/Perseus>

<https://github.com/OHDSI/WhiteRabbit>

<https://github.com/OHDSI/Usagi>

#### ATLAS and Cohort Discovery

<https://github.com/OHDSI/Atlas>

<https://github.com/OHDSI/WebAPI>

#### Broadsea

<https://www.youtube.com/watch?v=a9ZJURNRbUg>

#### Data Analysis

<https://github.com/OHDSI/Achilles>

<https://github.com/OHDSI/Hades>

<https://github.com/OHDSI/DataQualityDashboard>

# OMOP Scripts for Epic

["The Spectrum Code"](https://userweb.epic.com/User/788dbdff-6712-4b16-aabc-98cdb1be4ff9): scripts and documentation created by Roger Carlson at Corewell Health

[RUMC OMOP transition scripts from Clarity, Caboodle](https://userweb.epic.com/User/788dbdff-6712-4b16-aabc-98cdb1be4ff9): Code created by Rush University Medical Center

# Using synthetic data

[MIMIC-IV](https://physionet.org/content/mimic-iv-demo-omop/0.9/1_omop_data_csv/#files-panel) 100-patient demo dataset based on MIMIC to create a OMOP instance

[Synthea](https://github.com/OHDSI/ETL-Synthea) GitHub site with files to use the synthetic patient generator Synthea

[Eunomia](https://ohdsi.github.io/Eunomia/) LInk to the Eunomia GitHub.io site with instructions and standard dataset files

# Useful Resources

[Web site for the OHDSI community](https://www.ohdsi.org/): http://www.ohdsi.org

[The Book of OHDSI:](https://ohdsi.github.io/TheBookOfOhdsi/) What is OHDSI and why should I care?

[EHDEN Academy](https://academy.ehden.eu/) : EHDEN Academy is a site with courses for developing skills working with OHDSI

[Tutorials & Workshops](https://www.youtube.com/playlist?list=PLpzbqK7kvfeXRQktX0PV-cRpb3EFA2e7Z) : Tutorial sessions 1-8 provide a comprehensive overview from vocabularies and creating cohorts to prediction

[OHDSI Forums](https://forums.ohdsi.org/) : Searchable, active user community

[OHDSI Community Dashboard](https://dash.ohdsi.org/) : Tracks publications, citations, researchers and activity within the OHDSI community

[Clinical Registry Efforts Within OHDSI (Sept. 13 Community Call)](https://www.youtube.com/watch?v=HhQ9x3bsv4o): Video discussing Perseus and Broadsea

[OHDSI-in-a-Box on GitHub](https://github.com/OHDSI/OHDSI-in-a-Box) : A learning environment created for the OHDSI community

[Integrating Flowsheet Data in OMOP Common Data Model for Clinical Research](https://arxiv.org/ftp/arxiv/papers/2109/2109.08235.pdf) Paper written by informatics teams at Stanford University and The Hospital for Sick Children

[Guide to privacy issues in OMOP journey](https://ohdsi.github.io/CommonDataModel/cdmPrivacy.html): Article outlining how to manage protected health information

[DQD](https://github.com/OHDSI/DataQualityDashboard) GitHub repository for Data Quality Dashboard tool

[PheKB](https://phekb.org/phenotypes) A phenotype repository

[Analyze observational patient data by using OHDSI with the OMOP CDM](https://learn.microsoft.com/en-us/azure/architecture/example-scenario/digital-health/patient-data-ohdsi-omop-cdm) Microsoft guide to OMOP CDM

[OHDSI on Azure GitHub](https://github.com/microsoft/OHDSIonAzure) Automation code and documentation for deploying OHDSI CDM in Azure

[How to develop capacity for observational research within a health system](https://www.ohdsi.org/2022showcase-79/) Presentation on building capacity from 2022 OHDSI Collaborator Showcase
matlink/index.qmd at Danielle's-edits · benwmar/matlink
 